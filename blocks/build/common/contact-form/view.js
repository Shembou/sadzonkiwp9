(()=>{"use strict";class e{async submitReactiveForm(e){try{const t=await fetch("/wp-json/blocks/v1/contact-min",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.text();throw new Error(`Server error (${t.status}): ${e}`)}let r;try{r=await t.json()}catch(e){throw new Error("Invalid JSON response from server")}return r.error?(console.error("API error:",r.error),{success:!1,message:r.error}):(console.log("Success:",r),{success:!0,data:r})}catch(e){return console.error("Request failed:",e),{success:!1,message:e.message}}}async submitContactForm(e){try{const t=await fetch("/wp-json/blocks/v1/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.text();throw new Error(`Server error (${t.status}): ${e}`)}let r;try{r=await t.json()}catch(e){throw new Error("Invalid JSON response from server")}return r.error?(console.error("API error:",r.error),{success:!1,message:r.error}):(console.log("Success:",r),{success:!0,data:r})}catch(e){return console.error("Request failed:",e),{success:!1,message:e.message}}}}let t={};function r(e,r){const s=document.querySelector(`[name="${e}"]`);return!!s&&(s.classList.remove("invalid"),s.setCustomValidity(""),s.checkValidity()?(t[e]=s.value.trim(),!0):(s.setCustomValidity(r),s.classList.add("invalid"),s.reportValidity(),!1))}document.addEventListener("DOMContentLoaded",()=>{const s=document.querySelector("form.wp-block-common-contact-form");s&&(function(e){const t=e.querySelectorAll("input,textarea");null!=t&&t.forEach(e=>{e.addEventListener("focus",()=>{e.classList.add("wasFocused","focused")}),e.addEventListener("blur",()=>{e.classList.remove("focused")})})}(s),s.addEventListener("submit",s=>{s.preventDefault(),r("mail","Proszę podać poprawny adres e-mail")&&r("name","Proszę podać poprawnę imię")&&r("tel","Proszę podać poprawny numer telefonu")&&function(){const e=document.querySelector('textarea[name="text"]');return!!e&&(e.checkValidity()?(e.classList.contains("invalid")&&e.classList.remove("invalid"),t.text=e.value.trim(),!0):(e.classList.add("invalid"),e.reportValidity(),!1))}()&&function(){const e=document.querySelector('[name="privacy-policy"]');return!!e&&(e.classList.remove("invalid"),e.setCustomValidity(""),e.checked?(t["privacy-policy"]=e.checked,!0):(e.setCustomValidity("Do wysłania wiadomości wymagane jest potwierdzenie polityki prywatności"),e.reportValidity(),!1))}()&&(new e).submitContactForm(t).then(e=>{e.success?alert("Form submitted successfully!"):alert("Error: "+e.message)})}))})})();